; ==============================================================================
; Zambezi Meats - PHP 8.2 Production Configuration
; ==============================================================================
; DEP-005: Configure PHP 8.2
; PHP 8.2 with required extensions, optimized settings
; ==============================================================================
;
; Installation:
;   1. Find your PHP ini location: php --ini
;   2. Copy these settings to a new file:
;      /etc/php/8.2/fpm/conf.d/99-zambezimeats.ini
;   3. Restart PHP-FPM: sudo systemctl restart php8.2-fpm
;
; ==============================================================================

[PHP]
; ==============================================================================
; Error Handling
; ==============================================================================
display_errors = Off
display_startup_errors = Off
log_errors = On
error_reporting = E_ALL & ~E_DEPRECATED & ~E_STRICT
error_log = /var/log/php/error.log

; ==============================================================================
; Resource Limits
; ==============================================================================
memory_limit = 256M
max_execution_time = 60
max_input_time = 60
max_input_vars = 3000

; ==============================================================================
; File Uploads
; ==============================================================================
file_uploads = On
upload_max_filesize = 20M
post_max_size = 25M
max_file_uploads = 10

; ==============================================================================
; Session (Security)
; ==============================================================================
session.cookie_secure = On
session.cookie_httponly = On
session.cookie_samesite = Lax
session.use_strict_mode = On
session.sid_length = 48
session.sid_bits_per_character = 6
session.gc_maxlifetime = 300

; ==============================================================================
; Security Settings
; ==============================================================================
expose_php = Off
allow_url_fopen = On
allow_url_include = Off
disable_functions = exec,passthru,shell_exec,system,proc_open,popen,curl_exec,curl_multi_exec,parse_ini_file,show_source

; ==============================================================================
; Timezone
; ==============================================================================
date.timezone = Australia/Sydney

; ==============================================================================
; OPcache (Performance)
; ==============================================================================
[opcache]
opcache.enable = 1
opcache.enable_cli = 0
opcache.memory_consumption = 256
opcache.interned_strings_buffer = 16
opcache.max_accelerated_files = 10000
opcache.validate_timestamps = 0
opcache.revalidate_freq = 0
opcache.save_comments = 1
opcache.jit = 1255
opcache.jit_buffer_size = 128M

; ==============================================================================
; Realpath Cache (Performance)
; ==============================================================================
realpath_cache_size = 4096K
realpath_cache_ttl = 600

; ==============================================================================
; MySQLi
; ==============================================================================
[mysqli]
mysqli.allow_persistent = On
mysqli.max_persistent = 10
mysqli.max_links = 100
mysqli.default_socket = /var/run/mysqld/mysqld.sock

; ==============================================================================
; PDO MySQL
; ==============================================================================
[pdo_mysql]
pdo_mysql.default_socket = /var/run/mysqld/mysqld.sock

; ==============================================================================
; cURL
; ==============================================================================
[curl]
curl.cainfo = /etc/ssl/certs/ca-certificates.crt

; ==============================================================================
; Required Extensions for Laravel
; ==============================================================================
; Ensure these extensions are enabled in your PHP installation:
; - bcmath
; - ctype
; - curl
; - dom
; - fileinfo
; - gd or imagick
; - json
; - mbstring
; - openssl
; - pdo
; - pdo_mysql
; - redis (for caching/sessions)
; - tokenizer
; - xml
; - zip
